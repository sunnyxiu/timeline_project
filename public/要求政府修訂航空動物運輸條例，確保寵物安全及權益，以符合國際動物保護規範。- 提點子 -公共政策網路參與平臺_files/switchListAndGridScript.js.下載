$(function(){$(window).resize(function(){resetAreaCoords()})});function openDiscription(){$("#discription").slideToggle(0,function(){resetAreaCoords()})}function changeArrow(){if($("#mapArrow").hasClass("arrow_up"))$("#mapArrow").removeClass("arrow_up");else $("#mapArrow").addClass("arrow_up")}function keyDownOpenDiscription(data,event){if(event.keyCode==13)openDiscription()}function openDiscriptionLink(elt){var url=$(elt).attr("href");window.open(url);return false}
function switchLayoutBySearchResult(type){switch(type){case layoutType.LIST:$("#searchResult").removeClass("grid_style");$("#searchResult").addClass("list_style");$(".arrange_tool").children().eq(0).removeClass("now");$(".arrange_tool").children().eq(1).addClass("now");break;case layoutType.GRID:$("#searchResult").removeClass("list_style");$("#searchResult").addClass("grid_style");$(".arrange_tool").children().eq(1).removeClass("now");$(".arrange_tool").children().eq(0).addClass("now");break}}
function toggleFastViewFinishIdea(elt){var t=$(elt).parent();var isOpend=t.hasClass("open");var actionType="open";if(isOpend)actionType="close";$("#fastViewFinishIdea").slideToggle({start:function(){if(actionType=="open")t.addClass("open");else if(actionType=="close");},complete:function(){if(actionType=="open");else if(actionType=="close")t.removeClass("open")}})}function toggleDeputyBox(viewModel,event){var target=$(event.currentTarget).parent("div.deputy_box");target.toggleClass("open",250)}
function resetAreaCoords(){$img=$(".imageArea");if($img.length==0)return;var naturalWidth=$img.get(0).naturalWidth;var naturalHeight=$img.get(0).naturalHeight;var width=$img.get(0).width;var height=$img.get(0).height;var rateW=width/naturalWidth;var rateH=height/naturalHeight;var rate=(rateW+rateH)/2;if(_module=="budget")budgetAreaPosition(rate);else if(_module=="idea")ideaAreaPosition(rate)}
function budgetAreaPosition(rate){var areaDestopPosition=["74,323,66","268,323,66","468,323,66","671,323,66","864,323,66","205,460,338,565"];var areaMobilePosition=["331,85,82","331,360,82","331,630,82","331,904,82","331,1176,82","481,279,609,423"];$('map[name\x3d"m_budgetFlow"]').find("area").each(function(index,item){var $this=$(item);var position=areaMobilePosition[index].split(",");$.each(position,function(idx,item){if(index==0&&mainViewModel.stepView.iconAnnouncement.enable()){position[idx]=
item*rate;return}if(index==1&&mainViewModel.stepView.iconProposal.enable()){position[idx]=item*rate;return}if(index==2&&mainViewModel.stepView.iconReview.enable()){position[idx]=item*rate;return}if(index==3&&mainViewModel.stepView.iconVote.enable()){position[idx]=item*rate;return}if(index==4&&mainViewModel.stepView.iconRanking.enable()){position[idx]=item*rate;return}if(index==5&&mainViewModel.stepView.iconProposal.enable()){position[idx]=item*rate;return}position[idx]=item*0});$this.prop("coords",
position.join());$this.click(function(){toContainer($this)})});$('map[name\x3d"budgetFlow"]').find("area").each(function(index,item){var $this=$(item);var position=areaDestopPosition[index].split(",");$.each(position,function(idx,item){if(index==0&&mainViewModel.stepView.iconAnnouncement.enable())return;if(index==1&&mainViewModel.stepView.iconProposal.enable())return;if(index==2&&mainViewModel.stepView.iconReview.enable())return;if(index==3&&mainViewModel.stepView.iconVote.enable())return;if(index==
4&&mainViewModel.stepView.iconRanking.enable())return;if(index==5&&mainViewModel.stepView.iconProposal.enable())return;position[idx]=item*0});$this.prop("coords",position.join());$this.click(function(){toContainer($this)})});function toContainer(elt){if(_budgetVersion=="Budget_2018"){$("#infoTab").addClass("close");var $tabList=$(".tab_list div a");$.each($tabList,function(idx,item){if(idx==0){var $item=$(item);var otherTab=$item.attr("href");$(otherTab).addClass("close");$item.parent().removeClass("now")}});
var $tab=$("#proposalTab");$tab.removeClass("close");$($tabList[0]).parent().addClass("now")}var toContainerId=elt.attr("href");if(toContainerId=="")return;var $c=$(toContainerId);if($c.length==0)return;var minusHeight=$("#top").height();var pos=$c.offset();$("html,body").animate({scrollTop:pos.top-minusHeight});$c.find("div.title_view").focus()}}
function ideaAreaPosition(rate){var areaDestopPosition=["206,3,314,93","11,166,73,270","219,171,304,272","378,172,470,274","534,1,641,98","543,173,630,278","825,173,920,276"];var areaMobilePosition=["80,180,184,269","271,19,358,109","272,175,360,270","274,312,362,398","34,438,132,533","274,437,366,536","274,603,367,688"];$('map[name\x3d"m_ideaFlow"]').find("area").each(function(index,item){var $this=$(item);var position=areaMobilePosition[index].split(",");$.each(position,function(idx,item){position[idx]=
item*rate;return});$this.prop("coords",position.join())});$('map[name\x3d"ideaFlow"]').find("area").each(function(index,item){var $this=$(item);var position=areaDestopPosition[index].split(",");$this.prop("coords",position.join())})};