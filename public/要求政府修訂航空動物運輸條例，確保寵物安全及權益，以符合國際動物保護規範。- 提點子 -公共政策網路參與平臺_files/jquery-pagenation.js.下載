(function(){$.fn.pagenation=function(prop){var settings=$.extend({pagenationContainer:$(this),items:1,itemsPerPage:5,step:1,startPage:1,onClickCallback:function(pageNumber){console.log("go to page",pageNumber)}},prop);var code="",pages,current,li;var container=settings.pagenationContainer;container.append('\x3cul class\x3d"pagenation-wrap"\x3e\x3c/ul\x3e');container=container.find("ul");function first(){return'\x3cli page-data\x3d"1" class\x3d"page-num-wrap"\x3e\x3ca href\x3d"#" class\x3d"page-inner-link" title\x3d"點擊搜尋第一頁資料"\x3e1\x3c/a\x3e\x3c/li\x3e\x3cdiv class\x3d"spaces"\x3e\x26nbsp;...\x26nbsp;\x3c/div\x3e'}
function last(){return'\x3cdiv class\x3d"spaces"\x3e\x26nbsp;...\x26nbsp;\x3c/div\x3e\x3cli class\x3d"page-num-wrap" page-data\x3d"'+pages+'"\x3e\x3ca href\x3d"#" class\x3d"page-inner-link" title\x3d"點擊搜尋第'+pages+'頁資料"\x3e'+pages+"\x3c/a\x3e\x3c/li\x3e"}function render(){container.empty();container.append(code);code="";container.find("a.page-inner-link").click(function(e){e.preventDefault();return true})}function addEventListner(){settings.pagenationContainer.on({click:function(){var $this=$(this);
if(!$this.is(".first,.prev,.next,.last"))process(parseInt($this.attr("page-data")));else if($this.is(".first")){if(current!==1)process(1)}else if($this.is(".last")){if(current!==pages)process(pages)}else if($this.is(".prev")){if(current!==1)process(parseInt(current)-1)}else if(current!==pages)process(parseInt(current)+1);if(!$this.hasClass("disabled")&&typeof settings.onClickCallback==="function")settings.onClickCallback(current)},keydown:function(e){if(e.keyCode===13){e.preventDefault();$(this).trigger("click");
return false}}},"li")}function currentActive(page){li=container.find("li");li.each(function(){var $this=$(this);if(parseInt($this.attr("page-data"))===page)$this.addClass("active")});return page}function pagesInBetween(start,end){code="";for(var i=start;i<=end;i++)code+='\x3cli class\x3d"page-num-wrap" page-data\x3d"'+i+'"\x3e\x3ca href\x3d"#" class\x3d"page-inner-link" title\x3d"點擊搜尋第'+i+'頁資料"\x3e'+i+"\x3c/a\x3e\x3c/li\x3e";return code}function before(){return'\x3cli tabindex\x3d"0" class\x3d"prev pageination-outline-btn mr-2" title\x3d"點擊搜尋上一頁資料"\x3e上一頁\x3c/li\x3e'}
function after(){return'\x3cli tabindex\x3d"0" class\x3d"next pageination-btn ml-2" title\x3d"點擊搜尋下一頁資料"\x3e下一頁\x3c/li\x3e'}function process(page){if(page<0)throw new Error("("+page+") invalid pages!");else if(pages<=settings.step*2+2||pages<=settings.step*2+4){code+=before();code+=pagesInBetween(1,pages);code+=after();render()}else if(page<=settings.step*2+1){code+=before();code+=pagesInBetween(1,settings.step*2+3);code+=last();code+=after();render()}else if(page>settings.step*2+1&&page<pages-(settings.step*
2-1)){code+=before();code+=first();code+=pagesInBetween(page-settings.step,page+settings.step);code+=last();code+=after();render()}else if(page>=pages-(settings.step*2-1)){code+=before();code+=first();code+=pagesInBetween(pages-(settings.step*2+2),pages);code+=after();render()}current=currentActive(page);if(current===1)container.find("li.prev,li.first").addClass("disabled");else container.find("li.prev, li.first").removeClass("disabled");if(current===pages)container.find("li.next,li.last").addClass("disabled");
else container.find("li.next,li.last").removeClass("disabled")}(function init(){if(settings.items===null||settings.items<1)settings.items=1;pages=Math.ceil(settings.items/settings.itemsPerPage);if(settings.startPage>pages)settings.startPage=1;var page=settings.startPage;process(page);var isReady=settings.pagenationContainer.data("isReady");if(isReady==="1")return;settings.pagenationContainer.data("isReady","1");addEventListner()})()}})($);